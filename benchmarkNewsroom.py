# -*- coding: utf-8 -*-
"""benchmarkNewsroom.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1sb9dNBj58NevdzORrpdMXrJ27m__Vxl_

1. Mount google drive to re-use already downloaded and processed data
"""

from google.colab import drive
drive.mount('/content/drive')

"""2. Install necessary packages from google drive packages/Transformer2/requirements.text . For this example the location is /content/drive/My\ Drive/Colab\ Notebooks/packages/Transformer2/requirements.txt"""

!pip3 install -r /content/drive/My\ Drive/Colab\ Notebooks/packages/Transformer2/requirements.txt

"""3. Select tensorflow 2 for colab execution"""

# Commented out IPython magic to ensure Python compatibility.
try:
  # %tensorflow_version only exists in Colab.
#   %tensorflow_version 2.x
except Exception:
  pass

"""4. Install tensorboard extension"""

# Commented out IPython magic to ensure Python compatibility.
# %load_ext tensorboard

"""5. Load tensorboard logs for scalar form /content/drive/My\ Drive/Colab\ Notebooks/data/logs/[DATASET_NAME]."""

# Commented out IPython magic to ensure Python compatibility.
# %tensorboard --logdir /content/drive/My\ Drive/Colab\ Notebooks/data/logs/newsroom

"""6. Training with specific dataset."""

!python /content/drive/My\ Drive/Colab\ Notebooks/packages/Transformer2/train.py --dataset_name newsroom --epochs 10

"""7. Generate attention weight images for sample data"""

!python /content/drive/My\ Drive/Colab\ Notebooks/packages/Transformer2/predictor.py --dataset_name newsroom

"""8. Load tensorflow for attention images"""

# Commented out IPython magic to ensure Python compatibility.
# %tensorboard --logdir /content/drive/My\ Drive/Colab\ Notebooks/data/plots/newsroom